// https://leetcode.com/problems/number-of-islands/
import 'dart:math';

import './input-island.dart';

class Solution {
  verifySides(int row, int col, List<List<String>> grid) {
    // isInvalidIdx or out of grid
    if (row < 0 || col < 0 || row >= grid.length || col > grid[row].length - 1) return;
    if (grid[row][col] == '0') return;

    // mark as visited
    // replace in place if it is visited to optimize, I've replaced visited logic for that
    grid[row][col] = '0';

    // Verify all neighbor
    verifySides(row+1, col, grid);
    verifySides(row-1, col, grid);
    verifySides(row, col+1, grid);
    verifySides(row, col-1, grid);
  }

  int numIslands(List<List<String>> grid) {
    var count = 0;

    for (var i = 0; i < grid.length; i++) {
      for (var j = 0; j < grid[i].length; j++) {
        if (grid[i][j] == '1') {
          // Four sides
          verifySides(i,j, grid);

          // Basically just count when return from recursion it means:
          // return when you count a new island
          // Cada vez que você achar uma célula "1" não visitada, você executa a DFS e conta uma nova ilha.
          count++;
        }
      }
    }

    return count;
  }
}

main() {
  // var grid = [
  //   ["1","1","1","1","0"],
  //   ["1","1","0","1","0"],
  //   ["1","1","0","0","0"],
  //   ["0","0","0","0","0"]
  // ];

  // var grid = [
  //   ["1","1","1","1","0"],
  //   ["1","1","0","1","0"],
  //   ["1","1","0","0","0"],
  //   ["0","0","1","0","1"]
  // ];
  
  // 4 island
  // var grid = [
  //   ["1","1","0","0","0"],
  //   ["1","1","0","0","0"],
  //   ["0","0","1","0","0"],
  //   ["0","0","0","0","0"],
  //   ["1","1","0","0","0"],
  //   ["1","1","0","1","1"],
  // ];
  // print(Solution().numIslands(grid));

  // const badGrid = [
  //   ["1","1","1","1","1","0","1","1","1","1"],
  //   ["1","0","1","0","1","1","1","1","1","1"],
  //   ["0","1","1","1","0","1","1","1","1","1"],
  //   ["1","1","0","1","1","0","0","0","0","1"],
  //   ["1","0","1","0","1","0","0","1","0","1"],
  //   ["1","0","0","1","1","1","0","1","0","0"],
  //   ["0","0","1","0","0","1","1","1","1","0"],
  //   ["1","0","1","1","1","0","0","1","1","1"],
  //   ["1","1","1","1","1","1","1","1","0","1"],
  //   ["1","0","1","1","1","1","1","1","1","0"]
  // ];
  //
  // print(Solution().numIslands(badGrid));
  
  // 58 islands
  // var newBig = [["1","0","0","1","1","1","0","1","1","0","0","0","0","0","0","0","0","0","0","0"],["1","0","0","1","1","0","0","1","0","0","0","1","0","1","0","1","0","0","1","0"],["0","0","0","1","1","1","1","0","1","0","1","1","0","0","0","0","1","0","1","0"],["0","0","0","1","1","0","0","1","0","0","0","1","1","1","0","0","1","0","0","1"],["0","0","0","0","0","0","0","1","1","1","0","0","0","0","0","0","0","0","0","0"],["1","0","0","0","0","1","0","1","0","1","1","0","0","0","0","0","0","1","0","1"],["0","0","0","1","0","0","0","1","0","1","0","1","0","1","0","1","0","1","0","1"],["0","0","0","1","0","1","0","0","1","1","0","1","0","1","1","0","1","1","1","0"],["0","0","0","0","1","0","0","1","1","0","0","0","0","1","0","0","0","1","0","1"],["0","0","1","0","0","1","0","0","0","0","0","1","0","0","1","0","0","0","1","0"],["1","0","0","1","0","0","0","0","0","0","0","1","0","0","1","0","1","0","1","0"],["0","1","0","0","0","1","0","1","0","1","1","0","1","1","1","0","1","1","0","0"],["1","1","0","1","0","0","0","0","1","0","0","0","0","0","0","1","0","0","0","1"],["0","1","0","0","1","1","1","0","0","0","1","1","1","1","1","0","1","0","0","0"],["0","0","1","1","1","0","0","0","1","1","0","0","0","1","0","1","0","0","0","0"],["1","0","0","1","0","1","0","0","0","0","1","0","0","0","1","0","1","0","1","1"],["1","0","1","0","0","0","0","0","0","1","0","0","0","1","0","1","0","0","0","0"],["0","1","1","0","0","0","1","1","1","0","1","0","1","0","1","1","1","1","0","0"],["0","1","0","0","0","0","1","1","0","0","1","0","1","0","0","1","0","0","1","1"],["0","0","0","0","0","0","1","1","1","1","0","1","0","0","0","1","1","0","0","0"]];
  // print(Solution().numIslands(newBig));

  Stopwatch stopwatch = Stopwatch()..start();
  var value = Solution().numIslands(bigInput);
  stopwatch.stop();

  print('$value : ${stopwatch.elapsedMilliseconds / 1000}');
}
